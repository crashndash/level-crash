!function(e){e.module("levelCrash",["ngRoute","ngTouch","levelCrash.controllers","levelCrash.directives","jui","ajaxLoader"]).config(["$compileProvider","$routeProvider","$locationProvider",function(e,t,n){n.html5Mode(!0),t.when("/",{templateUrl:"/partials/main.html?1413315133422",controller:"mainCtrl"}).when("/level/:level",{templateUrl:"/partials/level.html?1413315133422",controller:"levelCtrl"}),t.otherwise({redirectTo:"/"}),e.aHrefSanitizationWhitelist(/^\s*(https?|ftp|mailto|fb462788903779716):/)}]),e.module("levelCrash.controllers",[],function(){}),e.module("levelCrash.directives",[],function(){})}(angular),function(e){"use strict";e.module("ajaxLoader",[]).directive("ajaxLoader",["$http",function(e){return{restrict:"A",link:function(t,n){t.isLoading=function(){for(var t=0,n=e.pendingRequests.length-1;n>=0;n--){var l=e.pendingRequests[n];l.skipLoader||t++}return t>0},t.$watch(t.isLoading,function(e){n[0].style.display=e?"block":"none"})},template:'<div class="loading-spinner-holder"><div class="inner"><h1><i class="dot-1"></i><i class="dot-2"></i><i class="dot-3"></i><i class="dot-4"></i></h1></div><div class="background"></div></div>'}}])}(angular),function(e){e.module("levelCrash.directives").directive("dashboard",function(){return{templateUrl:"/js/components/dashboard/dashboard.html?1413315133422"}})}(angular),function(e){e.module("levelCrash.directives").directive("roads",function(){return{templateUrl:"/js/components/roads/roads.html?1413315133422"}})}(angular),function(e){e.module("levelCrash.controllers").controller("levelCtrl",["$scope","$timeout","$http","$routeParams","$location","$window",function(e,t,n,l,r,o){var s,a,c=[],u={obstacles:{},jumpCount:11,minOffset:30,maxOffset:30,powerups:{},blocks:{},offsets:{},theme:"grass",length:50,roadAlters:{},swarms:{}},v=l.level;u.powerups={},n.get("/api/level/"+v).success(function(t){$.extend(u,t),e.loaded=!0}).error(function(e,t){return 404===t?(o.alert("Something went wrong, bacause we can not find this level. Sorry!"),void r.path("/")):void o.alert("Something went wrong, sorry!")}),e.possibleBlocks={bricks:!0,water:!0,grass:!0,fire:!0},e.possibleObstacles={hole:!0,wheel:!0,rock:!0},e.possiblePowerUps={nitro:!0,bomb:!0,jumps_pu:!0,invincible:!0},e.level=u,e.makeRoads=function(){if(s===parseInt(e.level.length,10))return c;c=[];for(var t=0;t<e.level.length;t++)c.push(t);return s=parseInt(e.level.length,10),c},e.hasPowerup=function(t){var n=e.level,l=n.length-t;return n.powerups&&n.powerups[l]?!0:!1},e.powerUp=function(t){var n=e.level,l=n.length-t,r=n.powerups[l];return e.possiblePowerUps[r]?r:!1},e.hasSwarm=function(t){var n=e.level;return n.swarms&&n.swarms[n.length-t]?!0:!1},e.hasObstacle=function(t){var n=e.level;return n.obstacles&&n.obstacles[n.length-t]?!0:!1},e.obstacle=function(t){var n=e.level,l=n.length-t,r=n.obstacles[l];return e.possibleObstacles[r]?r:!1},e.hasBlock=function(t){var n=e.level;return n.blocks&&n.blocks[n.length-t]?!0:!1},e.block=function(t){var n=e.level,l=n.blocks[n.length-t];return e.possibleBlocks[l]?l:!1},e.getWidth=function(t,n){var l=e.level,r=l.length-n;return l.offsets[r]&&l.offsets[r][t]?l.offsets[r][t]/2:l.minOffset},e.getSvgPoints=function(t,n){var l=function(t){var n=e.getWidth(1,t),l=e.getWidth(1,t-1),r=[];return r.push(80-l+",0"),r.push("80,0"),r.push("80,"+e.getHeight(t)),r.push(80-n+","+e.getHeight(t)),r.join(" ")};return l(n)},e.getHeight=function(e){var t=u.length-e;return u.roadAlters[t]?u.roadAlters[t]:100};var d=function(t,n,l,r){var o=u.length-n;u.offsets[o]=u.offsets[o]||{},u.offsets[o][t]=l,r||e.$digest()};e.sideResized=function(e,t){var n=$(e.target),l=n.attr("data-index"),r=n.attr("data-side"),o=2*t.size.width;d(r,l,o)};var h=function(){return e.level.name&&""!==e.level.name?n.post("/api/level",{level:e.level,name:e.level.name}):!1};e.saveLevel=function(){var e=h();return e?void e.success(function(){}).error(function(e,t){return 400===t?void o.alert(e):void o.alert("We had some problems saving this.")}):void o.alert("Something went wrong")},e.setElementActive=function(e,t){a={type:e,value:t}},e.setElementActive("block","bricks"),e.addElement=function(t){if(t&&a&&a.type&&a.value){var n=u.length-parseInt(t,10),l=["blocks","powerups","swarms","obstacles"];for(i=0,len=l.length;len>i;i++){var r=l[i];if(e.level[r][n])return void delete e.level[r][n]}e.level[a.type+"s"][n]=a.value}},e.isElementActive=function(e,t){return a&&a.type===e&&a.value===t},e.adjustSide=function(t,n,l){var r=e.level.length-t,o=u.offsets[r]=u.offsets[r]||{},s=(o[n]?o[n]:60)+parseInt(l,10);return s>120||5>s?!1:d(n,t,s,!0)},e.makePath=function(e){return encodeURIComponent(encodeURIComponent(e))}}]),e.module("levelCrash.controllers").controller("mainCtrl",["$scope","$location","$http","$window",function(e,t,n,l){n.get("/api/mylevels").success(function(t){e.myLevels=t}),e.makePath=function(e){return encodeURIComponent(encodeURIComponent(e))},e.tryStepTwo=function(){if(!e.name||0===e.name.length||e.name.length>12){var r="Please choose a level name between 1 and 12 characters.";return void l.alert(r)}if(!e.author||0===e.author.length||e.author.length>12){var o="Please use a name between 1 and 12 characters.";return void l.alert(o)}var s=n.post("/api/level",{name:e.name,level:{author:e.author,length:50}});s.success(function(){t.path("/level/"+encodeURIComponent(e.name))}).error(function(){l.alert("Something went wrong!")})}}])}(angular);